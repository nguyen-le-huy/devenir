# RAG 3.0 Environment Variables
# Add these to your existing .env file

# ==================== RAG 3.0 FEATURE FLAGS ====================
# Query Transformation
ENABLE_QUERY_TRANSFORMATION=false    # Enable query decomposition, expansion, rewriting
ENABLE_SEMANTIC_CACHE=false          # Enable semantic similarity caching
ENABLE_PERSONALIZATION=false          # Enable user profiling and personalized ranking
ENABLE_FACT_CHECKING=false           # Enable factual accuracy verification
ENABLE_CITATIONS=false               # Enable source citation tracking
ENABLE_QUALITY_SCORING=false         # Enable RAGAS-style quality evaluation
ENABLE_DOMAIN_RERANKER=false         # Enable domain-specific reranking service

# Advanced Retrieval
ENABLE_ADAPTIVE_HYBRID_SEARCH=false  # Enable adaptive vector+keyword weighting
ENABLE_POPULARITY_BOOST=false        # Boost popular products in search results
ENABLE_SEASONAL_BOOST=false          # Boost seasonal products (e.g., winter coats)
ENABLE_KEYWORD_SEARCH=false          # Enable MongoDB text search alongside vector search

# ==================== REDIS CONFIGURATION ====================
# Redis URL for semantic cache (already configured if using existing Redis)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_password_here  # If using password auth

# ==================== SECURITY ====================
# Encryption key for PII (User Profiles)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=                      # 64 hex characters for AES-256
# Example: 3f7a2b8c5d9e1f4a6c8b2e5d7f3a1c9e5b4d8f2a6e3c7b1d5f9a4e8c2b7d3f1a

# ==================== DOMAIN RERANKER (FUTURE) ====================
# FastAPI microservice for domain-specific reranking
RERANKER_ENDPOINT=http://localhost:8001/rerank
RERANKER_TIMEOUT_MS=500
RERANKER_FALLBACK_TO_COHERE=true     # Fallback to Cohere if reranker fails

# ==================== PERFORMANCE TUNING ====================
# Semantic Cache
SEMANTIC_CACHE_TTL_HOURS=6           # Cache TTL in hours (default: 6)
SEMANTIC_CACHE_SIMILARITY_THRESHOLD=0.95  # Min similarity for cache hit (0-1)

# Personalization
PERSONALIZATION_BOOST_MAX=1.5        # Max boost multiplier for personalized results

# Hybrid Search
HYBRID_SEARCH_TOP_K=50               # Max results from hybrid search (default: 50)
POPULARITY_BOOST_WEIGHT=0.1          # Popularity boost weight (0-1, default: 0.1)
SEASONAL_BOOST_WEIGHT=0.15           # Seasonal boost weight (0-1, default: 0.15)

# Keyword Search
KEYWORD_SEARCH_MIN_SCORE=0.1         # Min text search score (0-10, default: 0.1)
# Note: MongoDB text index required - run createTextIndex() on startup

# ==================== QUALITY ASSURANCE ====================
# RAGAS Quality Scoring
MIN_RAGAS_SCORE=0.85                 # Minimum acceptable RAGAS score
MIN_FAITHFULNESS_SCORE=0.80          # Minimum faithfulness score (0-1)
MIN_RELEVANCE_SCORE=0.75             # Minimum relevance score (0-1)

# Fact Checking
ENABLE_AUTO_REGENERATION=true        # Auto-regenerate if fact check fails
PRICE_VERIFICATION_TOLERANCE=0.05   # Price tolerance (5%)
NAME_ACCURACY_THRESHOLD=0.80        # Name accuracy threshold (80%)

# Citations
MIN_CITATION_COVERAGE=0.70          # Minimum % of sources that should be cited

# ==================== MONITORING ====================
# Advanced metrics collection
ENABLE_ADVANCED_METRICS=true
METRICS_EXPORT_INTERVAL_MS=60000     # Export metrics every 60s
